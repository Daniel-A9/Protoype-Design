<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="google" content="notranslate">
    <title>Home ‚Ä¢ Your Feed</title>
    <link href="../style.css" rel="stylesheet">
  </head>
  <body>

    <!-- Fixed Top Header -->
    <header class="top-header">
      <div class="header-wordmark">
        <img src="../text.png" alt="Local Market Wordmark" loading="lazy" class="wordmark-img">
      </div>
      <nav class="header-nav" aria-label="Main navigation">
        <a href="../home/index.html" class="link" data-testid="desktop-nav-home">Home</a>
        <a href="../index.html" class="link" data-testid="desktop-nav-discovery">Discover</a>
        <a href="../discussions/categories/local-discussions/index.html" class="link" data-testid="desktop-nav-community">Community</a>
        <a href="../cart/index.html" class="link" data-testid="desktop-nav-cart">
          <i>shopping_cart</i>
          <span>Cart</span>
        </a>
      </nav>
      <!-- Right side: Logo and hamburger menu -->
      <div class="header-right">
        <!-- Site Logo -->
        <a href="../index.html" class="site-logo">
          <img src="../Logo 333.png" alt="LocalMarket Logo" loading="lazy">
        </a>
        <a href="../userprofile/index.html" class="header-profile" data-testid="desktop-nav-profile" aria-label="User profile">
          <img src="https://images.unsplash.com/photo-1608270586620-248524c67de9?w=60&h=60&fit=crop" alt="Profile" loading="lazy" class="circle small">
        </a>
        <!-- Home Feed Hamburger Menu -->
        <button type="button" class="feed-menu-btn" aria-label="Home feed menu" aria-expanded="false" aria-controls="homeFeedMenu">
          <i>menu</i>
          <menu class="feed-menu-dropdown" id="homeFeedMenu" role="menu">
            <li role="menuitem">
              <a href="#" class="menu-item">Edit Home Feed</a>
            </li>
          </menu>
        </button>
      </div>
    </header>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav">
      <a href="index.html" class="nav-item active" data-testid="mobile-nav-home">
        <i>home</i>
      </a>
      <a href="../index.html" class="nav-item" data-testid="mobile-nav-search">
        <i>search</i>
      </a>
      <a href="../discussions/categories/local-discussions/index.html" class="nav-item" data-testid="mobile-nav-discussions">
        <i>groups</i>
      </a>
      <a href="../cart/index.html" class="nav-item" data-testid="mobile-nav-cart">
        <i>shopping_cart</i>
      </a>
      <a href="../userprofile/index.html" class="nav-item" data-testid="mobile-nav-profile">
        <i>person</i>
      </a>
    </nav>

    <main class="responsive" style="height: calc(100vh - 52px); overflow-y: auto; padding-bottom: 70px;">
      <div class="container">
        <div class="row">
          <div class="col s12">
            
            <!-- Header: Feed Filters -->
            <div class="header-section">
              <div class="row no-gap middle-align" style="justify-content: center;">
                <nav class="group" role="tablist" aria-label="Feed filters" id="feedToggle" style="max-width: 600px;">
                  <button class="left-round" data-filter="all" aria-pressed="true" role="tab">All</button>
                  <button class="no-round" data-filter="following" aria-pressed="false" role="tab">Following</button>
                  <button class="no-round" data-filter="events" aria-pressed="false" role="tab">Events</button>
                  <button class="right-round" data-filter="discussions" aria-pressed="false" role="tab">Discussions</button>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="container">
        <div class="row">
          <div class="col s12">
            <!-- Unified Feed -->
            <div class="feed-container" id="homeFeed">

              <!-- Following: Vendor post -->
              <div class="card small" data-category="following">
                <div class="card-header-row">
                  <div class="row no-gap top-align max">
                    <div class="col s2">
                      <img src="https://www.beercss.com/favicon.png" class="circle small" loading="lazy">
                    </div>
                    <div class="col s10">
                      <h5 class="card-title">Brewery Central</h5>
                      <div class="card-meta">
                        <span>New post ‚Ä¢ 15m</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-divider"></div>
                <div class="card-image">
                  <img src="https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=800&h=400&fit=crop" class="responsive" loading="lazy">
                </div>
                <div class="card-divider"></div>
                <div class="card-content left-align">
                  <p>Fresh Citrus IPA pouring this weekend. Stop by the taproom for a tasting flight and live music.</p>
                </div>
                <div class="card-divider"></div>
                <div class="card-footer">
                  <div class="row no-gap">
                    <div class="col s6">
                      <div class="clickable-container" onclick="toggleLike(this)">
                        <i class="material-icons">favorite_border</i>
                        <span class="like-text">Like</span>
                        <span class="like-count">18</span>
                      </div>
                    </div>
                    <div class="col s6">
                      <div class="clickable-container" onclick="toggleComments(this)">
                        <i class="material-icons">chat_bubble_outline</i>
                        <span class="comment-text">Comment</span>
                        <span class="comment-count">5</span>
                      </div>
                    </div>
                  </div>
                  <div style="position: absolute; right: 0.5rem; bottom: 0.5rem;">
                    <button data-ui="#post-menu-home-1" class="circle transparent small">
                      <i>more_vert</i>
                    </button>
                    <menu id="post-menu-home-1">
                      <li><a href="#" onclick="openReportDialog('post', 'home-vendor-post-1'); return false;">Report</a></li>
                    </menu>
                  </div>
                </div>
                
                <!-- Comments Section -->
                <div class="comments-section" style="display: none;">
                  <div class="comments-list">
                    <div class="comment-item">
                      <div class="row no-gap">
                        <div class="col s2">
                          <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                        </div>
                        <div class="col s10">
                          <strong>BeerLover42</strong>
                          <p>This looks amazing! When will it be available in stores?</p>
                          <small class="text-grey">1 hour ago</small>
                        </div>
                      </div>
                    </div>
                    <div class="comment-item">
                      <div class="row no-gap">
                        <div class="col s2">
                          <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                        </div>
                        <div class="col s10">
                          <strong>HopHead</strong>
                          <p>Love the citrus notes! Perfect for summer üç∫</p>
                          <small class="text-grey">45 minutes ago</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Add Comment Form -->
                  <div class="add-comment">
                    <div class="row no-gap">
                      <div class="col s2">
                        <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                      </div>
                      <div class="col s10">
                        <div class="input-field">
                          <input type="text" class="comment-input" placeholder="Write a comment...">
                          <button class="btn small" onclick="addComment(this)">Post</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Events: Reminder -->
              <div class="card small" data-category="events">
                <div class="card-header-row">
                  <div class="row no-gap top-align max">
                    <div class="col s2">
                      <i class="large text-primary">event</i>
                    </div>
                    <div class="col s10">
                      <h5 class="card-title">Tomorrow ‚Ä¢ Summer Craft Beer Tasting</h5>
                      <div class="card-meta">
                        <span>Reminder from events you follow</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-divider"></div>
                <div class="card-content left-align">
                  <p>Doors at 6:00 PM ‚Ä¢ Downtown Brewery ‚Ä¢ Tickets available at the door.</p>
                </div>
              </div>

              <!-- Discussions: Followed category post -->
              <div class="card small" data-category="discussions">
                <div class="card-header-row">
                  <div class="row no-gap top-align max">
                    <div class="col s2">
                      <img src="https://www.beercss.com/favicon.png" class="circle small" loading="lazy">
                    </div>
                    <div class="col s10">
                      <h5 class="card-title">Sarah M.</h5>
                      <div class="card-meta">
                        <span>Local Discussions ‚Ä¢ 45m</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-divider"></div>
                <div class="card-content left-align">
                  <p>Favorite farmers markets this month? Share recommendations and vendor tips.</p>
                </div>
                <div class="card-divider"></div>
                <div class="card-footer">
                  <div class="row no-gap">
                    <div class="col s6">
                      <div class="clickable-container" onclick="toggleLike(this)">
                        <i class="material-icons">favorite_border</i>
                        <span class="like-text">Like</span>
                        <span class="like-count">24</span>
                      </div>
                    </div>
                    <div class="col s6">
                      <div class="clickable-container" onclick="toggleComments(this)">
                        <i class="material-icons">chat_bubble_outline</i>
                        <span class="comment-text">Comment</span>
                        <span class="comment-count">8</span>
                      </div>
                    </div>
                  </div>
                  <div style="position: absolute; right: 0.5rem; bottom: 0.5rem;">
                    <button data-ui="#post-menu-home-3" class="circle transparent small">
                      <i>more_vert</i>
                    </button>
                    <menu id="post-menu-home-3">
                      <li><a href="#" onclick="openReportDialog('post', 'home-discussion-post-1'); return false;">Report</a></li>
                    </menu>
                  </div>
                </div>
                
                <!-- Comments Section -->
                <div class="comments-section" style="display: none;">
                  <div class="comments-list">
                    <div class="comment-item">
                      <div class="row no-gap">
                        <div class="col s2">
                          <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                        </div>
                        <div class="col s10">
                          <strong>MarketLover</strong>
                          <p>The downtown market on Main Street is fantastic! Great produce selection.</p>
                          <small class="text-grey">30 minutes ago</small>
                        </div>
                      </div>
                    </div>
                    <div class="comment-item">
                      <div class="row no-gap">
                        <div class="col s2">
                          <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                        </div>
                        <div class="col s10">
                          <strong>LocalFoodie</strong>
                          <p>Try the Riverside market on Saturdays - best organic selection!</p>
                          <small class="text-grey">20 minutes ago</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Add Comment Form -->
                  <div class="add-comment">
                    <div class="row no-gap">
                      <div class="col s2">
                        <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                      </div>
                      <div class="col s10">
                        <div class="input-field">
                          <input type="text" class="comment-input" placeholder="Write a comment...">
                          <button class="btn small" onclick="addComment(this)">Post</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- More feed samples (mixed) -->
              <div class="card small" data-category="following">
                <div class="card-header-row">
                  <div class="row no-gap top-align max">
                    <div class="col s2">
                      <img src="https://www.beercss.com/favicon.png" class="circle small" loading="lazy">
                    </div>
                    <div class="col s10">
                      <h5 class="card-title">Sunny Acres Farm</h5>
                      <div class="card-meta">
                        <span>New post ‚Ä¢ 2h</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-divider"></div>
                <div class="card-content left-align">
                  <p>First strawberries of the season are in! Pick-your-own starts Saturday.</p>
                </div>
                <div class="card-divider"></div>
                <div class="card-footer">
                  <div class="row no-gap">
                    <div class="col s6">
                      <div class="clickable-container" onclick="toggleLike(this)">
                        <i class="material-icons">favorite_border</i>
                        <span class="like-text">Like</span>
                        <span class="like-count">12</span>
                      </div>
                    </div>
                    <div class="col s6">
                      <div class="clickable-container" onclick="toggleComments(this)">
                        <i class="material-icons">chat_bubble_outline</i>
                        <span class="comment-text">Comment</span>
                        <span class="comment-count">3</span>
                      </div>
                    </div>
                  </div>
                  <div style="position: absolute; right: 0.5rem; bottom: 0.5rem;">
                    <button data-ui="#post-menu-home-2" class="circle transparent small">
                      <i>more_vert</i>
                    </button>
                    <menu id="post-menu-home-2">
                      <li><a href="#" onclick="openReportDialog('post', 'home-vendor-post-2'); return false;">Report</a></li>
                    </menu>
                  </div>
                </div>
                
                <!-- Comments Section -->
                <div class="comments-section" style="display: none;">
                  <div class="comments-list">
                    <div class="comment-item">
                      <div class="row no-gap">
                        <div class="col s2">
                          <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                        </div>
                        <div class="col s10">
                          <strong>FarmFresh</strong>
                          <p>Can't wait! What time do you open on Saturday?</p>
                          <small class="text-grey">30 minutes ago</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Add Comment Form -->
                  <div class="add-comment">
                    <div class="row no-gap">
                      <div class="col s2">
                        <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                      </div>
                      <div class="col s10">
                        <div class="input-field">
                          <input type="text" class="comment-input" placeholder="Write a comment...">
                          <button class="btn small" onclick="addComment(this)">Post</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="card small" data-category="events">
                <div class="card-content left-align">
                  <h6 style="text-align: left; margin-bottom: 0.5rem;">Craft Fair Countdown</h6>
                  <p>2 days left ‚Ä¢ Vendor map published. See you on Main Street!</p>
                </div>
              </div>

              <div class="card small" data-category="discussions">
                <div class="card-header-row">
                  <div class="row no-gap top-align max">
                    <div class="col s2">
                      <img src="https://www.beercss.com/favicon.png" class="circle small" loading="lazy">
                    </div>
                    <div class="col s10">
                      <h5 class="card-title">Emma L.</h5>
                      <div class="card-meta">
                        <span>Tips & Resources ‚Ä¢ 1h</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="card-divider"></div>
                <div class="card-content left-align">
                  <p>Best packaging for shipping pottery‚Äîlooking for lightweight, eco options.</p>
                </div>
                <div class="card-divider"></div>
                <div class="card-footer">
                  <div class="row no-gap">
                    <div class="col s6">
                      <div class="clickable-container" onclick="toggleLike(this)">
                        <i class="material-icons">favorite_border</i>
                        <span class="like-text">Like</span>
                        <span class="like-count">18</span>
                      </div>
                    </div>
                    <div class="col s6">
                      <div class="clickable-container" onclick="toggleComments(this)">
                        <i class="material-icons">chat_bubble_outline</i>
                        <span class="comment-text">Comment</span>
                        <span class="comment-count">5</span>
                      </div>
                    </div>
                  </div>
                  <div style="position: absolute; right: 0.5rem; bottom: 0.5rem;">
                    <button data-ui="#post-menu-home-4" class="circle transparent small">
                      <i>more_vert</i>
                    </button>
                    <menu id="post-menu-home-4">
                      <li><a href="#" onclick="openReportDialog('post', 'home-discussion-post-2'); return false;">Report</a></li>
                    </menu>
                  </div>
                </div>
                
                <!-- Comments Section -->
                <div class="comments-section" style="display: none;">
                  <div class="comments-list">
                    <div class="comment-item">
                      <div class="row no-gap">
                        <div class="col s2">
                          <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                        </div>
                        <div class="col s10">
                          <strong>PotterPro</strong>
                          <p>I use recycled bubble wrap and cardboard boxes. Very eco-friendly!</p>
                          <small class="text-grey">45 minutes ago</small>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Add Comment Form -->
                  <div class="add-comment">
                    <div class="row no-gap">
                      <div class="col s2">
                        <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
                      </div>
                      <div class="col s10">
                        <div class="input-field">
                          <input type="text" class="comment-input" placeholder="Write a comment...">
                          <button class="btn small" onclick="addComment(this)">Post</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </main>

    <script type="module" src="https://cdn.jsdelivr.net/npm/beercss@3.12.13/dist/cdn/beer.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/material-dynamic-colors@1.1.2/dist/cdn/material-dynamic-colors.min.js"></script>
    <script>
      // Theme Toggle (same as other pages)
      (function() {
        const storedTheme = localStorage.getItem('theme') || 'light';
        document.body.classList.remove('dark', 'light');
        document.body.classList.add(storedTheme);
        const toggleButton = document.createElement('button');
        toggleButton.className = 'theme-toggle circle';
        toggleButton.setAttribute('aria-label', 'Toggle theme');
        toggleButton.innerHTML = '<i>' + (storedTheme === 'light' ? 'dark_mode' : 'light_mode') + '</i>';
        toggleButton.addEventListener('click', function() {
          const currentTheme = document.body.classList.contains('dark') ? 'dark' : 'light';
          const newTheme = currentTheme === 'light' ? 'dark' : 'light';
          document.body.classList.remove('dark', 'light');
          document.body.classList.add(newTheme);
          localStorage.setItem('theme', newTheme);
          toggleButton.querySelector('i').textContent = newTheme === 'light' ? 'dark_mode' : 'light_mode';
        });
        document.body.appendChild(toggleButton);
      })();

      // Minimal filter toggle logic (no external JS)
      const toggleNav = document.getElementById('feedToggle');
      const cards = Array.from(document.querySelectorAll('[data-category]'));
      function applyFilter(filter) {
        cards.forEach(card => {
          const show = filter === 'all' || card.getAttribute('data-category') === filter;
          if (show) {
            card.removeAttribute('hidden');
          } else {
            card.setAttribute('hidden', '');
          }
        });
      }
      toggleNav?.addEventListener('click', (e) => {
        const btn = e.target.closest('button[data-filter]');
        if (!btn) return;
        toggleNav.querySelectorAll('button').forEach(b => b.setAttribute('aria-pressed', 'false'));
        btn.setAttribute('aria-pressed', 'true');
        applyFilter(btn.getAttribute('data-filter'));
      });
      
      // Hide header and logo when scrolling down
      (function() {
        let lastScrollTop = 0;
        const scrollThreshold = 10;
        const topHeader = document.querySelector('.top-header');
        const siteLogo = document.querySelector('.site-logo');
        const mainContent = document.querySelector('main.responsive') || document.querySelector('main');
        
        let ticking = false;
        
        function handleScroll() {
          const scrollTop = mainContent ? mainContent.scrollTop : (window.pageYOffset || document.documentElement.scrollTop);
          
          if (Math.abs(lastScrollTop - scrollTop) < scrollThreshold) {
            ticking = false;
            return;
          }
          
          if (scrollTop > lastScrollTop && scrollTop > scrollThreshold) {
            if (topHeader) topHeader.classList.add('header-hidden');
            if (siteLogo) siteLogo.classList.add('logo-hidden');
          } else if (scrollTop < lastScrollTop) {
            if (topHeader) topHeader.classList.remove('header-hidden');
            if (siteLogo) siteLogo.classList.remove('logo-hidden');
          }
          
          lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
          ticking = false;
        }
        
        function onScroll() {
          if (!ticking) {
            window.requestAnimationFrame(handleScroll);
            ticking = true;
          }
        }
        
        if (mainContent) {
          mainContent.addEventListener('scroll', onScroll, { passive: true });
        }
        window.addEventListener('scroll', onScroll, { passive: true });
      })();

      // Toggle comments dropdown
      function toggleComments(button) {
        const card = button.closest('.card');
        const commentsSection = card.querySelector('.comments-section');
        
        if (commentsSection.style.display === 'none') {
          commentsSection.style.display = 'block';
        } else {
          commentsSection.style.display = 'none';
        }
      }

      // Toggle like button
      function toggleLike(button) {
        const heartIcon = button.querySelector('.material-icons');
        const likeCountSpan = button.querySelector('.like-count');
        const currentCount = parseInt(likeCountSpan.textContent);
        
        if (heartIcon.textContent === 'favorite_border') {
          // Like the post
          heartIcon.textContent = 'favorite';
          button.classList.add('liked');
          likeCountSpan.textContent = currentCount + 1;
        } else {
          // Unlike the post
          heartIcon.textContent = 'favorite_border';
          button.classList.remove('liked');
          likeCountSpan.textContent = currentCount - 1;
        }
      }

      // Add comment function
      function addComment(element) {
        const postCard = element.closest('.card');
        const commentInput = postCard.querySelector('.comment-input');
        const commentsList = postCard.querySelector('.comments-list');
        const commentCount = postCard.querySelector('.comment-count');
        
        if (!commentInput || !commentsList || commentInput.value.trim() === '') return;
        
        // Create new comment element
        const newComment = document.createElement('div');
        newComment.className = 'comment-item';
        newComment.innerHTML = `
          <div class="row no-gap">
            <div class="col s2">
              <img src="https://www.beercss.com/favicon.png" class="circle extra-small">
            </div>
            <div class="col s10">
              <strong>You</strong>
              <p>${commentInput.value}</p>
              <small class="text-grey">Just now</small>
            </div>
          </div>
        `;
        
        // Add to comments list
        commentsList.appendChild(newComment);
        
        // Update comment count
        if (commentCount) {
          commentCount.textContent = parseInt(commentCount.textContent) + 1;
        }
        
        // Clear input
        commentInput.value = '';
        
        // Scroll to new comment
        newComment.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }
    </script>
  </body>
</html>


